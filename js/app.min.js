var Enemy=function(){this.initialize();this.height=101;this.width=70;this.sprite="images/enemy-bug.png"};Enemy.prototype.update=function(a){this.x=(this.x+this.speed);this.y=this.row*83;if(this.x>6*83){this.initialize()}};Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};Enemy.prototype.initialize=function(){this.col=-1;this.row=getRandomInt(1,3);this.x=this.col*83;this.y=this.row*101;this.speed=getRandomInt(2,5)};var Player=function(){this.initialize();this.sprite="images/char-boy.png";this.win=0;this.lose=0};Player.prototype.checkCollisions=function(){for(i=0;i<allEnemies.length;i++){if((this.x>allEnemies[i].x-50&&this.x<allEnemies[i].x-50+allEnemies[i].width)&&(this.y>allEnemies[i].y-50&&this.y<allEnemies[i].height+allEnemies[i].y-50)){player.canMove=false}}};Player.prototype.checkResults=function(){ctx.font="bold 36px Courier New";ctx.textAlign="center";ctx.fillText("Wins: "+player.win,100,750);ctx.fillText("Losses: "+player.lose,400,750)}.bind(this);Player.prototype.update=function(a){if(this.canMove){this.x=this.col*101;this.y=this.row*83;this.checkCollisions();this.checkResults()}if(this.y<83){this.canMove=false}if(this.canMove===false&&this.y>=83){ctx.font="108px Impact";ctx.fillStyle="red";ctx.lineWidth=3;ctx.textAlign="center";ctx.fillText("GAME OVER",250,700);ctx.strokeText("GAME OVER",250,700);ctx.font="bold 36px Courier New";ctx.fillStyle="black";ctx.fillText("Press Enter to restart",250,35);this.result=false}else{if(this.canMove===false&&this.y<83){ctx.font="108px Impact";ctx.fillStyle="green";ctx.lineWidth=3;ctx.textAlign="center";ctx.fillText("VICTORY",250,700);ctx.strokeText("VICTORY",250,700);ctx.font="bold 36px Courier New";ctx.fillStyle="black";ctx.fillText("Press Enter to restart",250,35);this.result=true}}if(this.canMove===false&&this.end===true){this.initialize();ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height)}};Player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};Player.prototype.initialize=function(){if(this.end===true){if(this.result===true){this.win++}else{if(this.result===false){this.lose++}}}this.col=2;this.row=5;this.canMove=true;this.end=false};Player.prototype.handleInput=function(a){switch(a){case"left":this.col--;break;case"up":this.row--;break;case"right":this.col++;break;case"down":this.row++;break;case"enter":if(this.canMove===false){this.end=true}break}switch(true){case (this.col<0):this.col=0;break;case (this.col>4):this.col=4;break;case (this.row<0):this.row=0;break;case (this.row>5):this.row=5;break}};var allEnemies=[];for(var i=0;i<3;i++){allEnemies.push(new Enemy())}var player=new Player();document.addEventListener("keyup",function(b){var a={13:"enter",37:"left",38:"up",39:"right",40:"down"};player.handleInput(a[b.keyCode])});function getRandomInt(b,a){b=Math.ceil(b);a=Math.floor(a);return Math.floor(Math.random()*(a-b))+b};